version: 2

models:
  - name: int_shop_orders_dimensionalized
    description: |
      Dimensionalized order facts with one record per shop. Table with details
      about first and latest order date and time, count of orders, quantity of
      items, revenue, count of customers and ranking of those metrics. This
      table can be joined to any fact table which contains shop_id as the
      foreign key.
    columns:
      - name: shop_id
        description: Primary key of the dim_shop table.
        tests:
          - unique
          - not_null
      - name: first_order_created_at
        description: First order timestamp.
      - name: latest_order_created_at
        description: Latest order timestamp.
      - name: order_count_rank
        description: |
          Ranking of count of orders across shops
          rank 1 is first across all shops.
      - name: item_quantity_rank
        description: |
          Ranking of quantity of items ordered across shops
          rank 1 is first across all shops.
      - name: customer_count_rank
        description: |
          Ranking of count of customers across shops
          rank 1 is first across all shops.
      - name: revenue_rank
        description: |
          Ranking of revenue across shops
          rank 1 is highest revenue across all shops.
      - name: order_count
        description: Count of orders.
      - name: item_quantity
        description: Quantity of items ordered.
      - name: customer_count
        description: Count of customers.
      - name: revenue
        description: Total revenue.
